<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'consultant_menu/css/style.css' %}">
    <style>
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 24px; }
        .card-tile {
            background: var(--card-bg, #fff);
            border: 1px solid var(--card-border, #ddd);
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .card-tile:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        }
        .card-tile h3 { margin: 0 0 8px 0; font-size: 18px; color: var(--text-primary, #1a1a1a); }
        .card-tile .meta { font-size: 13px; color: var(--text-muted, #666); }
        .card-tile .meta span { display: block; margin-top: 4px; }
        .add-form { margin-bottom: 24px; padding: 20px; background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 12px; }
        .add-form h3 { margin-top: 0; }
        .form-row-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        @media (max-width: 600px) { .form-row-cards { grid-template-columns: 1fr; } }
        .empty-cards { text-align: center; padding: 48px 24px; color: var(--text-muted); }
    </style>
</head>
<body>
    <div class="container" style="max-width: 1000px;">
        <div class="page-header">
            <h1>–ö–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h1>
            <div>
                <a href="{% url 'home' %}" class="btn btn-secondary" style="padding: 8px 16px;">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            </div>
        </div>

        {% if success %}<div class="success-message">{{ success }}</div>{% endif %}
        {% if error %}<div class="error-message">{{ error }}</div>{% endif %}

        <div class="add-form">
            <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</h3>
            <form method="POST" action="{% url 'client_cards_list' %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="create">
                <div class="form-row-cards">
                    <div class="form-group">
                        <label for="name">–ò–º—è</label>
                        <input type="text" id="name" name="name" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
                    </div>
                </div>
                <div class="form-row-cards">
                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="text" id="phone" name="phone" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label for="telegram">Telegram</label>
                        <input type="text" id="telegram" name="telegram" placeholder="@–Ω–∏–∫ –∏–ª–∏ —Å—Å—ã–ª–∫–∞">
                    </div>
                </div>
                <div class="form-group">
                    <label for="notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                    <textarea name="notes" id="notes" rows="2" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ" style="width:100%; padding:12px; border:1px solid var(--card-border,#ddd); border-radius:8px;"></textarea>
                </div>
                <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
            </form>
        </div>

        <h2 class="section-title">–ú–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏</h2>
        {% if cards %}
            <div class="cards-grid">
                {% for card in cards %}
                    <a href="{% url 'client_card_detail' card.id %}" class="card-tile">
                        <h3>{{ card.name|default:"–ë–µ–∑ –∏–º–µ–Ω–∏" }}</h3>
                        <div class="meta">
                            {% if card.email %}<span>üìß {{ card.email }}</span>{% endif %}
                            {% if card.telegram %}<span>‚úàÔ∏è {{ card.telegram }}</span>{% endif %}
                            {% if card.phone %}<span>üìû {{ card.phone }}</span>{% endif %}
                            {% if not card.email and not card.telegram and not card.phone %}<span>–ö–∞—Ä—Ç–æ—á–∫–∞ #{{ card.id }}</span>{% endif %}
                        </div>
                        {% if card.notes %}<p style="margin-top:10px; font-size:13px; color:var(--text-muted); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{{ card.notes }}</p>{% endif %}
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-cards">–ü–æ–∫–∞ –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –≤—ã—à–µ –∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–æ–±–Ω—ã–π –∫–ª–∏–µ–Ω—Ç.</div>
        {% endif %}
    </div>
</body>
</html>
