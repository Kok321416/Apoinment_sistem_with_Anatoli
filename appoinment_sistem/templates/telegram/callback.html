{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вход через Telegram</title>
    <link rel="stylesheet" href="{% static 'consultant_menu/css/style.css' %}">
    <style>
        .callback-wrap { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .callback-card { max-width: 360px; width: 100%; text-align: center; padding: 48px 32px; }
        .callback-spinner { width: 48px; height: 48px; margin: 0 auto 24px; border: 4px solid var(--card-border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
        .callback-msg { color: #555; font-size: 16px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="callback-wrap">
        <div class="container callback-card">
            <div class="callback-spinner"></div>
            <p class="callback-msg">Завершаем вход через Telegram…</p>
        </div>
    </div>
    <script>
(function () {
    var f = document.createElement('form');
    f.method = 'POST';
    f.action = window.location.pathname + (window.location.search || '');
    var fragment = window.location.hash ? window.location.hash.substring(1) : '';
    if (fragment) {
        var params = new URLSearchParams(fragment);
        params.forEach(function(value, name) {
            var d = document.createElement('input');
            d.type = 'hidden';
            d.name = name;
            d.value = value;
            f.appendChild(d);
        });
        document.body.appendChild(f);
        f.submit();
    }
})();
    </script>
</body>
</html>
