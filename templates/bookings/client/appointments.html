{% extends 'bookings/base.html' %}

{% block title %}–ú–æ–∏ –∑–∞–ø–∏—Å–∏ - –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏{% endblock %}

{% block content %}
<div class="card">
    <h1>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</h1>
    
    {% if appointments %}
        <div class="grid">
            {% for appointment in appointments %}
                <div class="list-item">
                    <div class="list-item-content">
                        <h3>{{ appointment.service.name|default:"–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è" }}</h3>
                        <p><strong>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong> {{ appointment.appointment_date|date:"d.m.Y H:i" }}</p>
                        <p><strong>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç:</strong> {{ appointment.specialist.user.get_full_name|default:appointment.specialist.user.username }}</p>
                        <span class="badge {% if appointment.status == 'confirmed' %}success{% elif appointment.status == 'cancelled' %}danger{% elif appointment.status == 'completed' %}success{% else %}warning{% endif %}">
                            {{ appointment.get_status_display }}
                        </span>
                    </div>
                    <div class="list-item-actions">
                        {% if appointment.status == 'pending' or appointment.status == 'confirmed' %}
                            <form method="post" style="display:inline;">
                                {% csrf_token %}
                                <input type="hidden" name="appointment_id" value="{{ appointment.id }}">
                                <input type="hidden" name="action" value="cancel">
                                <button type="submit" class="btn btn-secondary" style="padding: 8px 16px; font-size: 14px;">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                            </form>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <h2>üìÖ</h2>
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.</p>
        </div>
    {% endif %}
</div>
{% endblock %}


